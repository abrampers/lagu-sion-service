#+title: Architecture Decision Record for =lagu-sion-service=

* Project Description

** In Scope

** Out of Scope

** Design / Wireframes

* Accepted Decisions

* System Design
- How to present data (will be read heavy)
  - search
  - get lyrics
- How to input data
  - CSV?
- How to modify data

* Domain Data Structures

* APIs

** API Architecture
- REST
- GRPC
- GraphQL

** API definitions

* Storage

** DB Stack
- MongoDB
- Postgresql
- Redis

** DB Schema

* Monitoring
- Grafana + Loki?
- NewRelic / Appdynamics

* Project Structure
[[https://github.com/golang-standards/project-layout][golang-standards/project-layout]]

* Libraries

** Router
[[https://www.nicolasmerouze.com/guide-routers-golang][Golang router comparison]]

- [[http://www.gorillatoolkit.org/pkg/mux][gorilla/mux]]
- [[https://github.com/julienschmidt/httprouter][httprouter]]
- [[https://github.com/bmizerany/pat][pat]]
- [[https://github.com/gin-gonic/gin][gin]]

** Testing

** Database Client

* CI/CD

Assumptions:
- Repo is public

| platform       | price | limits       | concurrent jobs | manual deployment? |
|----------------+-------+--------------+-----------------+--------------------|
| Gitlab CI      | free  |              |                 | yes                |
| GitHub Actions | free  |              |                 | no                 |
| Travis CI      | free  |              |                 |                    |
| CircleCI       | free  | 100k credits |               4 | yes                |

** Gitlab CI

** GitHub Actions

** Travis CI

** CircleCI

- Telegram notification [[https://circleci.com/developer/orbs/orb/woltsu/telegram][woltsu/telegram]]
- [[https://circleci.com/docs/2.0/deployment-integrations/][Deployoment configuration]]
- [[https://circleci.com/blog/optimizing-open-source-projects-on-circleci/][Storing build artifacts]]

*** TODO Find artifacts storage limits

